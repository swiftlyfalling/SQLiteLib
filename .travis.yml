language: objective-c
xcode_project: SQLiteLib.xcodeproj

# Disable the default Travis-CI submodule logic
git:
  submodules: false

gemfile: .ci/Gemfile.travis

## see: https://github.com/travis-ci/travis-ci/issues/7587
#osx_image:
#  - xcode7.3
#  - xcode8.3
#
#env:
#  - DESTINATION: platform=macOS,arch=x86_64
#  - DESTINATION: platform=macOS,arch=i386
#  - DESTINATION: generic/platform=iOS
#  - DESTINATION: generic/platform=watchOS
#  - DESTINATION: generic/platform=tvOS
#  - DESTINATION: platform=iOS Simulator,name=iPhone 6s,OS=10.3

matrix:
  include:

    ### Xcode 7.3 on macOS 10.11
    - os: osx
      osx_image: xcode7.3
      env:
        - DESTINATION: platform=macOS,arch=x86_64
    - os: osx
      osx_image: xcode7.3
      env:
        - DESTINATION: platform=macOS,arch=i386
    - os: osx
      osx_image: xcode7.3
      env:
        - DESTINATION: generic/platform=iOS
    - os: osx
      osx_image: xcode7.3
      env:
        - DESTINATION: generic/platform=watchOS
    - os: osx
      osx_image: xcode7.3
      env:
        - DESTINATION: generic/platform=tvOS
    - os: osx
      osx_image: xcode7.3
      env:
        - DESTINATION: platform=iOS Simulator,name=iPhone 6s,OS=10.3

    ### Xcode 8.3 on macOS 10.12
    - os: osx
      osx_image: xcode8.3
      env:
        - DESTINATION: platform=macOS,arch=x86_64
    - os: osx
      osx_image: xcode8.3
      env:
        - DESTINATION: platform=macOS,arch=i386
    - os: osx
      osx_image: xcode8.3
      env:
        - DESTINATION: generic/platform=iOS
    - os: osx
      osx_image: xcode8.3
      env:
        - DESTINATION: generic/platform=watchOS
    - os: osx
      osx_image: xcode8.3
      env:
        - DESTINATION: generic/platform=tvOS
    - os: osx
      osx_image: xcode8.3
      env:
        - DESTINATION: platform=iOS Simulator,name=iPhone 6s,OS=10.3

script:
  - cd .ci
  - make test_build
